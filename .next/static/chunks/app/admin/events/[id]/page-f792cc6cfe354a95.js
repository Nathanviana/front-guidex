(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{968:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var s=a(2115),n=a(3655),r=a(5155),i=s.forwardRef((e,t)=>(0,r.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var d=i},3655:(e,t,a)=>{"use strict";a.d(t,{hO:()=>l,sG:()=>d});var s=a(2115),n=a(7650),r=a(9708),i=a(5155),d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,r.TL)(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:n,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n?a:t,{...r,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function l(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},4126:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},6219:(e,t,a)=>{Promise.resolve().then(a.bind(a,6820))},6820:(e,t,a)=>{"use strict";a.d(t,{default:()=>D});var s=a(5155),n=a(2115),r=a(5695),i=a(285),d=a(6695),l=a(2523),c=a(5057),o=a(8539),m=a(7550),u=a(9074);let h=(0,a(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var x=a(4516),p=a(4126),v=a(4229),j=a(5365),g=a(5339),f=a(646),N=a(5819);function D(e){let{id:t}=e,a=(0,r.useRouter)(),[D,y]=(0,n.useState)(""),[w,b]=(0,n.useState)(""),[S,E]=(0,n.useState)(!1),[k,A]=(0,n.useState)(!0),[F,T]=(0,n.useState)(null),[C,M]=(0,n.useState)({name:"",description:"",startDate:"",endDate:"",location:""}),P=e=>{if(!e)return"";let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n,"T").concat(r,":").concat(i)};(0,n.useEffect)(()=>{(async()=>{try{A(!0);let e=(await N.A.get("/events/".concat(t))).data;T(e),M({name:e.name,description:e.description,startDate:P(e.startDate),endDate:P(e.endDate),location:e.location})}catch(t){var e;console.error("Error fetching event:",t),(null==(e=t.response)?void 0:e.status)===404?y("Event not found"):y("Failed to load event data")}finally{A(!1)}})()},[t]);let L=(e,t)=>{M(a=>({...a,[e]:t}))},R=async e=>{if(e.preventDefault(),y(""),b(""),E(!0),!C.name||!C.description||!C.startDate||!C.endDate||!C.location){y("All fields are required"),E(!1);return}let s=new Date(C.startDate);if(new Date(C.endDate)<=s){y("End date must be after start date"),E(!1);return}try{let e={...C,startDate:new Date(C.startDate).toISOString(),endDate:new Date(C.endDate).toISOString()},s=await N.A.put("/events/".concat(t),e);200===s.status&&(b("Event updated successfully!"),F&&T({...F,...e,updatedAt:new Date().toISOString()}),setTimeout(()=>{a.push("/admin/events")},1500))}catch(e){var n,r,i,d,l;console.error("Error updating event:",e),(null==(r=e.response)||null==(n=r.data)?void 0:n.message)?y(e.response.data.message):(null==(i=e.response)?void 0:i.status)===400?y("Invalid data provided. Please check your inputs."):(null==(d=e.response)?void 0:d.status)===404?y("Event not found."):(null==(l=e.response)?void 0:l.status)===500?y("Server error. Please try again later."):y("Failed to update event. Please try again.")}finally{E(!1)}},$=async()=>{if(window.confirm("Are you sure you want to delete this event? This action cannot be undone.")){E(!0),y("");try{await N.A.delete("/events/".concat(t)),a.push("/admin/events")}catch(t){var e;console.error("Error deleting event:",t),(null==(e=t.response)?void 0:e.status)===404?y("Event not found."):y("Failed to delete event. Please try again."),E(!1)}}};return k?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>a.push("/admin/events"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),(0,s.jsx)("span",{children:"Loading event data..."})]})})]}):D&&!F?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>a.push("/admin/events"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"})]}),(0,s.jsxs)(j.Fc,{variant:"destructive",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(j.TN,{children:D})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>a.push("/admin/events"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Event"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(d.Zp,{className:"lg:col-span-1",children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),"Event Info"]}),(0,s.jsx)(d.BT,{children:"Current event details"})]}),(0,s.jsx)(d.Wu,{className:"space-y-4",children:F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),(0,s.jsx)("p",{className:"text-sm",children:F.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h,{className:"h-3 w-3"}),"Duration"]}),(0,s.jsx)("p",{className:"text-sm",children:((e,t)=>{let a=new Date(e),s=Math.round((new Date(t).getTime()-a.getTime())/36e5);if(s<24)return"".concat(s," hour").concat(1!==s?"s":"");{let e=Math.floor(s/24),t=s%24;return"".concat(e," day").concat(1!==e?"s":"").concat(t>0?" ".concat(t," hour").concat(1!==t?"s":""):"")}})(F.startDate,F.endDate)})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3"}),"Location"]}),(0,s.jsx)("p",{className:"text-sm",children:F.location})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,s.jsx)("p",{className:"text-sm",children:new Date(F.createdAt).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-sm",children:new Date(F.updatedAt).toLocaleDateString()})]})]})})]}),(0,s.jsxs)(d.Zp,{className:"lg:col-span-2",children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsx)(d.ZB,{children:"Edit Event"}),(0,s.jsx)(d.BT,{children:"Update the event information"})]}),(0,s.jsxs)("form",{onSubmit:R,children:[(0,s.jsxs)(d.Wu,{className:"space-y-6",children:[D&&(0,s.jsxs)(j.Fc,{variant:"destructive",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(j.TN,{children:D})]}),w&&(0,s.jsxs)(j.Fc,{className:"border-green-200 bg-green-50",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)(j.TN,{className:"text-green-800",children:w})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(c.J,{htmlFor:"name",children:["Event Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(l.p,{id:"name",placeholder:"Welcome Party for New Students",value:C.name,onChange:e=>L("name",e.target.value),required:!0,disabled:S})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(c.J,{htmlFor:"description",children:["Description ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(o.T,{id:"description",placeholder:"Join us for an exciting welcome party where new students can meet each other and learn about campus life...",value:C.description,onChange:e=>L("description",e.target.value),required:!0,disabled:S,rows:4}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Provide a detailed description of the event, including activities and what attendees can expect."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(c.J,{htmlFor:"startDate",children:["Start Date & Time ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(l.p,{id:"startDate",type:"datetime-local",value:C.startDate,onChange:e=>L("startDate",e.target.value),required:!0,disabled:S})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(c.J,{htmlFor:"endDate",children:["End Date & Time ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(l.p,{id:"endDate",type:"datetime-local",value:C.endDate,onChange:e=>L("endDate",e.target.value),required:!0,disabled:S})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(c.J,{htmlFor:"location",children:["Location ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(l.p,{id:"location",placeholder:"University Main Hall, Building A, Room 101",value:C.location,onChange:e=>L("location",e.target.value),required:!0,disabled:S}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Specify the exact location where the event will take place."})]}),C.name&&C.startDate&&C.endDate&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Updated Event Preview"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Event:"})," ",C.name]}),C.startDate&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Start:"})," ",new Date(C.startDate).toLocaleString()]}),C.endDate&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"End:"})," ",new Date(C.endDate).toLocaleString()]}),C.location&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Location:"})," ",C.location]}),C.startDate&&C.endDate&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Duration:"})," ",Math.round((new Date(C.endDate).getTime()-new Date(C.startDate).getTime())/36e5)," ","hours"]})]})]})]}),(0,s.jsxs)(d.wL,{className:"flex justify-between",children:[(0,s.jsx)(i.$,{variant:"destructive",type:"button",onClick:$,disabled:S,children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}),"Deleting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete"]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{variant:"outline",type:"button",onClick:()=>a.push("/admin/events"),disabled:S,children:"Cancel"}),(0,s.jsx)(i.$,{type:"submit",disabled:S,children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-t-foreground"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Update Event"]})})]})]})]})]})]})]})}},9074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[17,939,441,684,358],()=>t(6219)),_N_E=e.O()}]);